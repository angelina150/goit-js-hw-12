{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `<li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" class=\"gallery-img\" loading=\"lazy\">\n        </a>\n      <ul class=\"info\">\n            <li class=\"info-item\">\n                <p class=\"info-item-desc\">Likes</p>${imgInfo.likes}\n            </li>\n            <li class=\"info-item\">\n                <p class=\"info-item-desc\">Views</p>${imgInfo.views}\n            </li>\n            <li class=\"info-item\">\n                <p class=\"info-item-desc\">Comments</p>${imgInfo.comments}\n            </li>\n            <li class=\"info-item\">\n                <p class=\"info-item-desc\">Downloads</p>${imgInfo.downloads}\n            </li>\n        </ul>\n    </li>`;\n};\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport const fetchPhotos = (searchedQuery, page) => {\n  const axiosOptions = {\n    params: {\n      q: searchedQuery,\n      key: '45557561-052ca280d13484c0c5f536db7',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: page,\n      per_page: 15,\n    },\n  };\n  return axios.get('', axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst userList = document.querySelector('.user-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nconst galleryLightbox = new SimpleLightbox('.user-list a', {});\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nloadMoreBtn.classList.add('is-hidden');\nconst onSearchFormSubmit = async event => {\n  try {\n    userList.innerHTML = '';\n    event.preventDefault();\n    loader.classList.remove('is-hidden');\n    searchedValue = searchForm.elements.user_query.value;\n    currentPage = 1;\n    const response = await fetchPhotos(searchedValue, currentPage);\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      userList.innerHTML = '';\n      return;\n    }\n    console.log(response);\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n    userList.innerHTML = galleryCardsTemplate;\n    galleryLightbox.refresh();\n    if (response.data.hits.length < response.data.totalHits) {\n    loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'Sorry, there was a problem with your request. Please try again!',\n      position: 'topRight',\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n};\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n    const response = await fetchPhotos(searchedValue, currentPage);\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n    userList.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n    galleryLightbox.refresh();\n    const galleryCardEl = userList.querySelector('li');\n    cardHeight = galleryCardEl.getBoundingClientRect().height;\n    scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    if (currentPage === Math.ceil(response.data.totalHits / 15)) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message:\n        'Sorry, there was a problem with your request. Please try again!',\n      position: 'topRight',\n      color: 'yellow',\n    });\n  }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchForm","userList","loader","loadMoreBtn","galleryLightbox","SimpleLightbox","currentPage","searchedValue","cardHeight","onSearchFormSubmit","event","response","iziToast","galleryCardsTemplate","imgDetails","onLoadMoreBtnClick"],"mappings":"owBAAO,MAAMA,EAA4BC,GAChC;AAAA,iBACQA,EAAQ,aAAa;AAAA,wBACdA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,qDAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA,qDAGbA,EAAQ,KAAK;AAAA;AAAA;AAAA,wDAGVA,EAAQ,QAAQ;AAAA;AAAA;AAAA,yDAGfA,EAAQ,SAAS;AAAA;AAAA;AAAA,WCf1EC,EAAM,SAAS,QAAU,2BAClB,MAAMC,EAAc,CAACC,EAAeC,IAAS,CAClD,MAAMC,EAAe,CACnB,OAAQ,CACN,EAAGF,EACH,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACX,CACL,EACE,OAAOH,EAAM,IAAI,GAAII,CAAY,CACnC,ECNMC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAW,SAAS,cAAc,YAAY,EAC9CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAkB,IAAIC,EAAe,eAAgB,CAAE,CAAA,EAC7D,IAAIC,EAAc,EACdC,EAAgB,GAChBC,EAAa,EAEjBL,EAAY,UAAU,IAAI,WAAW,EACrC,MAAMM,EAAqB,MAAMC,GAAS,CACxC,GAAI,CACFT,EAAS,UAAY,GACrBS,EAAM,eAAc,EACpBR,EAAO,UAAU,OAAO,WAAW,EACnCK,EAAgBP,EAAW,SAAS,WAAW,MAC/CM,EAAc,EACd,MAAMK,EAAW,MAAMf,EAAYW,EAAeD,CAAW,EAC7D,GAAIK,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCC,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UAClB,CAAO,EACDX,EAAS,UAAY,GACrB,MACD,CACD,QAAQ,IAAIU,CAAQ,EACpB,MAAME,EAAuBF,EAAS,KAAK,KACxC,IAAIG,GAAcrB,EAA0BqB,CAAU,CAAC,EACvD,KAAK,EAAE,EACVb,EAAS,UAAYY,EACrBT,EAAgB,QAAO,EACnBO,EAAS,KAAK,KAAK,OAASA,EAAS,KAAK,WAC9CR,EAAY,UAAU,OAAO,WAAW,CAEzC,MAAe,CACdS,EAAS,MAAM,CACb,QACE,kEACF,SAAU,UAChB,CAAK,CACL,QAAY,CACRV,EAAO,UAAU,IAAI,WAAW,CACjC,CACH,EACMa,EAAqB,MAAML,GAAS,CACxC,GAAI,CACFJ,IACA,MAAMK,EAAW,MAAMf,EAAYW,EAAeD,CAAW,EACvDO,EAAuBF,EAAS,KAAK,KACxC,IAAIG,GAAcrB,EAA0BqB,CAAU,CAAC,EACvD,KAAK,EAAE,EACVb,EAAS,mBAAmB,YAAaY,CAAoB,EAC7DT,EAAgB,QAAO,EAEvBI,EADsBP,EAAS,cAAc,IAAI,EACtB,sBAAuB,EAAC,OACnD,SAAS,CACP,IAAKO,EAAa,EAClB,SAAU,QAChB,CAAK,EACGF,IAAgB,KAAK,KAAKK,EAAS,KAAK,UAAY,EAAE,IACxDR,EAAY,UAAU,IAAI,WAAW,EACrCS,EAAS,QAAQ,CACf,QAAS,6DACT,SAAU,UAClB,CAAO,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,QACE,kEACF,SAAU,WACV,MAAO,QACb,CAAK,CACF,CACH,EAEAZ,EAAW,iBAAiB,SAAUS,CAAkB,EACxDN,EAAY,iBAAiB,QAASY,CAAkB"}